name: python-body-validator
version: v1.0.0
description: >
  Validates the incoming JSON request body against a user-supplied JSON Schema
  (Draft 7). Returns HTTP 400 with a structured error if validation fails.
  Uses the third-party jsonschema library.
runtime: python

processingMode:
  requestHeaderMode: PROCESS
  requestBodyMode: BUFFER
  responseHeaderMode: SKIP
  responseBodyMode: SKIP

parameters:
  type: object
  properties:
    schema:
      type: object
      description: >
        A JSON Schema (Draft 7) object that the request body must conform to.
        If not provided the policy acts as a no-op.
      additionalProperties: true
      example:
        type: object
        required:
          - name
          - email
        properties:
          name:
            type: string
            minLength: 1
          email:
            type: string
            format: email
          age:
            type: integer
            minimum: 0
    rejectOnMissingBody:
      type: boolean
      description: >
        When true (default), requests with no body or a non-JSON body are
        rejected with HTTP 400. Set to false to allow such requests through.
      default: true

systemParameters:
  type: object
  properties: {}
