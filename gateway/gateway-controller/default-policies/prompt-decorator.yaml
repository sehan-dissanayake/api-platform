name: prompt-decorator
version: v0.3.0
description: |
  Applies configured prompt decorations to request payloads before upstream
  processing.

parameters:
  type: object
  properties:
    promptDecoratorConfig:
      type: object
      x-wso2-policy-advanced-param: true
      description: |
        Specifies prompt decoration configuration. Provide exactly one of
        `text` or `messages`.
      additionalProperties: false
      properties:
        text:
          type: string
          x-wso2-policy-advanced-param: false
          description: |
            Specifies text decoration applied when targeting a string prompt.
          minLength: 1
        messages:
          type: array
          x-wso2-policy-advanced-param: false
          description: |
            Specifies chat message decorations applied when targeting a messages
            array.
          minItems: 1
          items:
            type: object
            additionalProperties: false
            properties:
              role:
                type: string
                x-wso2-policy-advanced-param: true
                enum:
                  - system
                  - user
                  - assistant
                  - tool
              content:
                type: string
                x-wso2-policy-advanced-param: true
                minLength: 1
            required:
              - role
              - content
      oneOf:
        - required:
            - text
        - required:
            - messages
    jsonPath:
      type: string
      x-wso2-policy-advanced-param: true
      description: |
        Specifies the JSONPath expression used to locate the prompt segment to
        decorate. If omitted, defaults to "$.messages[-1].content" for `text`
        decorations and "$.messages" for `messages` decorations.
      default: ""
    append:
      type: boolean
      x-wso2-policy-advanced-param: true
      description: Specifies whether decorated content is appended (true) or
        prepended (false) to the selected prompt segment.
      default: false
  required:
    - promptDecoratorConfig

systemParameters:
  type: object
  properties: {}
