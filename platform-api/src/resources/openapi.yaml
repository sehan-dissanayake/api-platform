openapi: 3.1.1
info:
  title: WSO2 API Platform - Platform API
  description: |
    This document specifies a **RESTful API** for WSO2 **API Platform** - **Platform API**.
    
    ## Authentication
    
    All API endpoints (except organization registration) require authentication using JWT access tokens 
    generated by Thunder STS (Security Token Service).
    
    ### JWT Token Requirements
    
    - **Token Format**: Bearer token in Authorization header
    - **Required Claim**: `organization` - UUID of the user's organization
    - **Token Validation**: In development mode, signature validation can be skipped using `JWT_SKIP_VALIDATION=true`
    
    ### Organization Isolation
    
    All API operations are automatically scoped to the organization specified in the JWT token's 
    `organization` claim. Organization IDs are no longer required in request bodies or query parameters.

  version: 1.0.0
  contact:
    name: WSO2 API Platform Team
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html

servers:
  - url: https://localhost:9243/api/v1
    description: Development server (HTTPS)
  - url: https://api.platform.com/api/v1
    description: Production server

security:
  - BearerAuth: []

paths:
  /organizations:
    post:
      summary: Register a new organization
      description: |
        Registers a new organization with a unique UUID and handle. 
        This endpoint is used during the organization onboarding process.
        
        **Note**: This endpoint may be excluded from JWT authentication for initial setup.
      operationId: RegisterOrganization
      tags:
        - Organizations
      security: []  # TODO - Use API-key Auth
      requestBody:
        description: Organization that needs to be added
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Organization'
      responses:
        '201':
          description: Organization registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
            $ref: '#/components/responses/Conflict'
        '500':
            $ref: '#/components/responses/InternalServerError'

    get:
      summary: Get current user's organization
      description: |
        Retrieves the organization details for the organization specified in the JWT token's 
        `organization` claim.
      operationId: GetOrganization
      tags:
        - Organizations
      responses:
        '200':
          description: Organization retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /organizations/{organizationId}:
    head:
      summary: Check if organization exists
      description: |
        Checks if an organization with the specified UUID.
        Returns only headers without a response body.
      operationId: HeadOrganizationByUuid
      tags:
        - Organizations
      parameters:
        - $ref: '#/components/parameters/organizationId'
      responses:
        '200':
          description: Organization exists
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Organization not found
        '500':
          $ref: '#/components/responses/InternalServerError'

  /projects:
    post:
      summary: Create a new project
      description: |
        Creates a new project within the organization specified in the JWT token.
        Organization ID is automatically extracted from the token and does not need to be provided.
      operationId: CreateProject
      tags:
        - Projects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectRequest'
            example:
              name: "My Project"
      responses:
        '201':
          description: Project created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: Get all projects for current user's organization
      description: |
        Retrieves all projects belonging to the organization specified in the JWT token.
        Organization ID is automatically extracted from the token.
      operationId: ListProjects
      tags:
        - Projects
      responses:
        '200':
          description: Projects retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /projects/{projectId}:
    get:
      summary: Get project by UUID
      description: |
        Retrieves a specific project by its UUID. Access is validated against the organization 
        in the JWT token to ensure users can only access projects in their organization.
      operationId: GetProject
      tags:
        - Projects
      parameters:
        - $ref: '#/components/parameters/ProjectID'
      responses:
        '200':
          description: Project retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update project
      description: |
        Updates an existing project's name. Access is validated against the organization 
        in the JWT token.
      operationId: UpdateProject
      tags:
        - Projects
      parameters:
        - $ref: '#/components/parameters/ProjectID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProjectRequest'
      responses:
        '200':
          description: Project updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete project
      description: |
        Deletes a specific project by its UUID. Access is validated against the organization 
        in the JWT token.
      operationId: DeleteProject
      tags:
        - Projects
      parameters:
        - $ref: '#/components/parameters/ProjectID'
      responses:
        '204':
          description: Project deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /validate/api-project:
    post:
      summary: Validate API project
      description: |
        Validates an API project into the platform from a provided Git Repository URL.
        This endpoint checks the validity of the API project definitions and the overall validity of the API. 
        Returns the metadata of the API and the resources if the API project is valid.
      operationId: ValidateAPIProject
      tags:
        - APIs
      requestBody:
        description: API project validation details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateAPIProjectRequest'
      responses:
        '201':
          description: API project is valid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIProjectValidationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /validate/open-api:
    post:
      summary: Validate OpenAPI definition
      description: |
        Validates an OpenAPI definition provided either via URL or as a file upload.
        Returns validation results including any errors found and extracted metadata
        such as name, and operations if the definition is valid.
      operationId: ValidateOpenAPI
      tags:
        - APIs
      requestBody:
        description: OpenAPI definition validation details
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ValidateOpenAPIRequest'
      responses:
        '200':
          description: OpenAPI definition validation completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenAPIValidationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /import/open-api:
    post:
      summary: Import and create API from OpenAPI definition
      description: |
        Imports an OpenAPI definition into the platform from a provided URL or file upload.
        An API is created from the imported OpenAPI definition and is associated with a specified project within the
        organization in the JWT token.
      operationId: ImportOpenAPI
      tags:
        - APIs
      requestBody:
        description: OpenAPI import details
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImportOpenAPIRequest'
            encoding:
              url:
                contentType: text/plain
                style: form
              definition:
                contentType: application/octet-stream, application/json, application/yaml, text/yaml
                style: form
              api:
                contentType: application/json
                style: form
      responses:
        '201':
          description: OpenAPI imported successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /import/api-project:
    post:
      summary: Import API project
      description: |
        Imports an API project into the platform from a provided Git Repository URL.
        An API is created from the imported API project and is associated with a specified project within the
        organization in the JWT token.
      operationId: ImportAPIProject
      tags:
        - APIs
      requestBody:
        description: API project import details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImportAPIProjectRequest'
      responses:
        '201':
          description: API project imported successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis:
    get:
      summary: Get all APIs for an organization
      description: |
        Retrieves all APIs belonging to an organization. Optionally filter by project using 
        the projectId query parameter. Access is validated against the organization in the JWT token.
      operationId: ListAPIs
      tags:
        - APIs
      parameters:
        - $ref: '#/components/parameters/projectId-Q'
      responses:
        '200':
          description: APIs retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      summary: Create a new API
      description: |
        Creates a new API in the platform. The API is associated with a project, which must 
        belong to the organization specified in the JWT token.
      operationId: CreateAPI
      tags:
        - APIs
      requestBody:
        description: API object that needs to be added
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAPIRequest'
        required: true
      responses:
        '201':
          description: API created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/{apiId}:
    get:
      summary: Get API by UUID
      description: |
        Retrieves a specific API by its UUID. Access is validated against the organization 
        in the JWT token.
      operationId: GetAPI
      tags:
        - APIs
      parameters:
        - $ref: '#/components/parameters/apiID'
      responses:
        '200':
          description: API retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update API
      description: |
        Updates an existing API's details. Access is validated against the organization 
        in the JWT token.
      operationId: UpdateAPI
      tags:
        - APIs
      parameters:
        - $ref: '#/components/parameters/apiID'
      requestBody:
        description: API object that needs to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAPIRequest'
      responses:
        '200':
          description: API updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete API
      description: |
        Deletes a specific API by its UUID. Access is validated against the organization 
        in the JWT token.
      operationId: DeleteAPI
      tags:
        - APIs
      parameters:
        - $ref: '#/components/parameters/apiID'
      responses:
        '204':
          description: API deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'


  /apis/{apiId}/gateways:
    get:
      summary: Get gateways for API
      description: |
        Retrieves all gateways associated with the specified API, including deployment details.
        Returns gateway information along with association timestamps and deployment status.
        Access is validated against the organization in the JWT token.
      operationId: GetAPIGateways
      tags:
        - APIs
        - Gateways
      parameters:
        - $ref: '#/components/parameters/apiID'
      responses:
        '200':
          description: List of gateways associated with the API, including deployment details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIGatewayListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      summary: Add gateways for API
      description: |
        Associates gateways to the specified API. If gateways are already associated,
        updates the association timestamp. Returns all gateways associated with the API
        including deployment details. Access is validated against the organization 
        in the JWT token.
      operationId: AddGatewaysToAPI
      tags:
        - APIs
        - Gateways
      parameters:
        - $ref: '#/components/parameters/apiID'
      requestBody:
        description: List of gateways to associate with the API
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/AddGatewayToAPIRequest'
      responses:
        '200':
          description: List of all gateways associated with the API, including deployment details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIGatewayListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/{apiId}/devportals/publish:
    post:
      summary: Publish API to DevPortal
      description: |
        Publishes an existing API from platform-api to the configured DevPortal.
      operationId: PublishAPIToDevPortal
      tags:
        - APIs
        - DevPortal
      parameters:
        - $ref: '#/components/parameters/apiID'
      requestBody:
        description: API publishing details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PublishToDevPortalRequest'
      responses:
        '200':
          description: API successfully published to DevPortal
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
              example:
                success: true
                message: "API published successfully to DevPortal"
                timestamp: "2025-10-29T21:25:09.418859918+05:30"
        '400':
          description: Bad request - Invalid input or DevPortal not configured
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                invalidApiId:
                  summary: Invalid API ID format
                  value:
                    code: 400
                    message: Bad Request
                    description: API ID must be a valid UUID
                devPortalDisabled:
                  summary: DevPortal not configured
                  value:
                    code: 400
                    message: Bad Request
                    description: DevPortal integration is not enabled. Set DEVPORTAL_ENABLED=true
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: API not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                code: 404
                message: Not Found
                description: API with ID 1f01c9b2-440b-4cfe-bf48-f8f168062df4 does not exist
        '500':
          $ref: '#/components/responses/InternalServerError'
        '503':
          description: DevPortal unavailable after retries
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                code: 503
                message: Service Unavailable
                description: Failed to reach DevPortal after 3 retry attempts (total 60 seconds)

  /apis/{apiId}/devportals/unpublish:
    post:
      summary: Unpublish API from DevPortal
      description: |
        Removes an API from the configured DevPortal.
      operationId: UnpublishAPIFromDevPortal
      tags:
        - APIs
        - DevPortal
      parameters:
        - $ref: '#/components/parameters/apiID'
      requestBody:
        description: API unpublishing details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnpublishFromDevPortalRequest'
      responses:
        '200':
          description: API successfully unpublished from DevPortal
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
              example:
                success: true
                message: "API unpublished successfully from DevPortal"
                timestamp: "2025-10-29T21:08:59.834784232+05:30"
        '400':
          description: Bad request - Invalid input or DevPortal not configured
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: API not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'
        '503':
          description: DevPortal unavailable after retries
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /apis/{apiId}/publications:
    get:
      summary: Get API publications
      description: |
        Retrieves all DevPortals associated with an API including publication details.
      operationId: GetAPIPublications
      tags:
        - APIs
        - DevPortal
      parameters:
        - $ref: '#/components/parameters/apiID'
      responses:
        '200':
          description: API publications retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIDevPortalListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: API not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/validate:
    get:
      summary: Validate API identifier, name and version uniqueness within an organization
      description: |
        Validates if an API with the given identifier exists in an organization and if an API with the given name and 
        version combination exists within an organization. Either provide an identifier OR a combination of name and
        version as query parameters. Organization ID is automatically extracted from the JWT token.
      operationId: ValidateAPI
      tags:
        - APIs
      parameters:
        - $ref: '#/components/parameters/api-identifier-Q'
        - $ref: '#/components/parameters/api-name-Q'
        - $ref: '#/components/parameters/api-version-Q'
      responses:
        '200':
          description: API validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIValidationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/{apiId}/deployments:
    post:
      summary: Create and deploy a new deployment
      description: |
        Creates an immutable deployment artifact for an API and deploys it to a specified gateway.
        Each deployment targets a single gateway. The apiId parameter is the API handle (identifier),
        not the UUID. The deployment becomes active immediately on the target gateway. 
        Access is validated against the organization in the JWT token.
      operationId: DeployAPI
      tags:
        - API Deployments
      parameters:
        - $ref: '#/components/parameters/apiID'
      requestBody:
        description: Deployment request with gateway ID, base reference, and metadata
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeployAPIRequest'
      responses:
        '201':
          description: API deployed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          description: Bad Request. Validation errors (missing name, base, gatewayId, or API has no backend services)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Not Found. API, gateway, or base deployment not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: Get deployments for an API
      description: |
        Retrieves all deployment artifacts for a specific API. The apiId parameter is the API handle (identifier),
        not the UUID. Supports filtering by gateway UUID and deployment status. 
        Access is validated against the organization in the JWT token.
      operationId: GetDeployments
      tags:
        - API Deployments
      parameters:
        - $ref: '#/components/parameters/apiID'
        - $ref: '#/components/parameters/gatewayId-Q'
        - $ref: '#/components/parameters/deploymentStatus-Q'
      responses:
        '200':
          description: Deployments retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/{apiId}/deployments/{deploymentId}:
    get:
      summary: Get deployment by ID
      description: |
        Retrieves metadata for a specific deployment artifact including status, gateway association,
        and timestamps. Access is validated against the organization in the JWT token.
      operationId: GetDeployment
      tags:
        - API Deployments
      parameters:
        - $ref: '#/components/parameters/apiID'
        - $ref: '#/components/parameters/deploymentId'
      responses:
        '200':
          description: Deployment metadata retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      summary: Delete deployment
      description: |
        Deletes a deployment artifact. Deletion is only allowed when the deployment is in UNDEPLOYED status.
        Access is validated against the organization in the JWT token.
      operationId: DeleteDeployment
      tags:
        - API Deployments
      parameters:
        - $ref: '#/components/parameters/apiID'
        - $ref: '#/components/parameters/deploymentId'
      responses:
        '204':
          description: Deployment deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/{apiId}/deployments/undeploy:
    post:
      summary: Undeploy deployment from gateway
      description: |
        Undeploys an active deployment, stopping the API from being served on the specified gateway.
        The deployment artifact remains in the system with UNDEPLOYED status and can be restored later.
        Returns the updated deployment object with status changed to UNDEPLOYED.
        
        Both deploymentId and gatewayId are required for safety. The backend validates that the 
        deployment's bound gateway matches the provided gatewayId to prevent unintended operations.
        Access is validated against the organization in the JWT token.
      operationId: UndeployDeployment
      tags:
        - API Deployments
      parameters:
        - $ref: '#/components/parameters/apiID'
        - name: deploymentId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the deployment to undeploy
        - name: gatewayId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the gateway (validated against deployment's bound gateway)
      responses:
        '200':
          description: Deployment undeployed successfully. Returns the updated deployment with UNDEPLOYED status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /apis/{apiId}/deployments/restore:
    post:
      summary: Restore a previous deployment
      description: |
        Activates a previous deployment (ARCHIVED or UNDEPLOYED) by setting it as the current DEPLOYED version
        on the specified gateway. This operation changes the deployment state of the API on that gateway.
        The target deployment must not already be in DEPLOYED status.
        
        Both deploymentId and gatewayId are required for safety. The backend validates that the 
        deployment's bound gateway matches the provided gatewayId to prevent unintended operations.
        Access is validated against the organization in the JWT token.
      operationId: RestoreDeployment
      tags:
        - API Deployments
      parameters:
        - $ref: '#/components/parameters/apiID'
        - name: deploymentId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the deployment to restore (must be ARCHIVED or UNDEPLOYED)
        - name: gatewayId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the gateway (validated against deployment's bound gateway)
      responses:
        '200':
          description: Deployment restored successfully. Returns the deployment with status changed to DEPLOYED.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict. Cannot restore currently deployed deployment or deployment is invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /gateways:
    post:
      summary: Register a new gateway
      description: |
        Creates a new gateway within the organization specified in the JWT token.
        Organization ID is automatically extracted from the token and does not need to be provided.
      operationId: CreateGateway
      tags:
        - Gateways
      requestBody:
        description: Gateway registration details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGatewayRequest'
      responses:
        '201':
          description: Gateway registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Gateway name already exists within organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: List all gateways
      description: |
        Retrieves a list of all registered gateways for the organization specified in the JWT token.
        Organization ID is automatically extracted from the token.
      operationId: ListGateways
      tags:
        - Gateways
      responses:
        '200':
          description: Gateways retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /gateways/{gatewayId}:
    get:
      summary: Get gateway by UUID
      description: |
        Retrieves a specific gateway by its UUID. Access is validated against the organization 
        in the JWT token.
      operationId: GetGateway
      tags:
        - Gateways
      parameters:
        - $ref: '#/components/parameters/GatewayID'
      responses:
        '200':
          description: Gateway retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update gateway
      description: |
        Updates an existing gateway's mutable fields (description).
        Access is validated against the organization in the JWT token.
      operationId: UpdateGateway
      tags:
        - Gateways
      parameters:
        - $ref: '#/components/parameters/GatewayID'
      requestBody:
        description: Gateway object that needs to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGatewayRequest'
      responses:
        '200':
          description: Gateway updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete gateway
      description: |
        Permanently deletes a gateway and all associated tokens (CASCADE).
        Deletion is blocked if the gateway has active API deployments or WebSocket connections.
        Access is validated against the organization in the JWT token.
      operationId: DeleteGateway
      tags:
        - Gateways
      parameters:
        - $ref: '#/components/parameters/GatewayID'
      responses:
        '204':
          description: Gateway deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict. Gateway has active deployments or connections
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                activeDeployments:
                  value:
                    code: 409
                    message: Conflict
                    description: Cannot delete gateway - 3 active API deployment(s) exist
                activeConnections:
                  value:
                    code: 409
                    message: Conflict
                    description: Cannot delete gateway - 2 active connection(s) exist
        '500':
          $ref: '#/components/responses/InternalServerError'

  /gateways/{gatewayId}/tokens:
    get:
      summary: List active gateway tokens
      description: |
        Returns all active tokens for the specified gateway. Token hashes and salts are never exposed.
        Access is validated against the organization in the JWT token.
      operationId: listGatewayTokens
      tags:
        - Gateway Tokens
      parameters:
        - $ref: '#/components/parameters/GatewayID'
      responses:
        '200':
          description: List of active tokens
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TokenInfoResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      summary: Rotate gateway token
      description: |
        Generates a new authentication token for the gateway. The existing token remains active 
        to enable zero-downtime rotation. Access is validated against the organization in the JWT token.
      operationId: rotateGatewayToken
      tags:
        - Gateway Tokens
      parameters:
        - $ref: '#/components/parameters/GatewayID'
      responses:
        '201':
          description: New token generated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRotationResponse'
        '400':
          description: Bad request (e.g., maximum active tokens reached)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /gateways/{gatewayId}/tokens/{tokenId}:
    delete:
      summary: Revoke gateway token
      description: |
        Revokes a specific gateway token. Operation is idempotent - revoking an already-revoked 
        token succeeds. Access is validated against the organization in the JWT token.
      operationId: revokeGatewayToken
      tags:
        - Gateway Tokens
      parameters:
        - $ref: '#/components/parameters/GatewayID'
        - $ref: '#/components/parameters/TokenID'
      responses:
        '200':
          description: Token revoked successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Token revoked successfully"
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Gateway or token not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /gateways/{gatewayId}/live-proxy-artifacts:
    get:
      summary: Get gateway artifacts
      description: |
        Retrieves all artifacts (APIs, MCPs, API Products) deployed to a specific gateway with pagination support.
        Currently, only APIs are supported as artifacts. Future versions will include MCPs and API Products.
        Access is validated against the organization in the JWT token.
      operationId: GetGatewayArtifacts
      tags:
        - Gateways
        - Artifacts
      parameters:
        - $ref: '#/components/parameters/GatewayID'
        - $ref: '#/components/parameters/ArtifactType-Q'
      responses:
        '200':
          description: Paginated list of artifacts deployed to the gateway
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayArtifactListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /status/gateways:
    get:
      summary: Get gateway status
      description: |
        Retrieves lightweight status information for gateways. This endpoint is optimized for frequent polling 
        by management portals to monitor gateway connection status. If gatewayId query parameter is provided, 
        returns status for that specific gateway only. Otherwise returns status for all gateways in the organization.
      operationId: GetGatewayStatus
      tags:
        - Gateways
      parameters:
        - $ref: '#/components/parameters/gatewayId-Q'
      responses:
        '200':
          description: Gateway status retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayStatusListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Gateway not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /git/repo/fetch-branches:
    post:
      summary: Fetch Git repository branches
      description: |
        Fetches and returns the list of branches from a specified public Git repository.
        This endpoint supports multiple Git providers including GitHub, GitLab, and Bitbucket.
        The provider can be specified explicitly or will be auto-detected from the repository URL.
        This endpoint is used to verify repository accessibility and display branch options in the API Platform UI
        for API import functionality. Only public repositories are supported.
      operationId: FetchGitRepoBranches
      tags:
        - Git Operations
      requestBody:
        description: Git repository URL to fetch branches from
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GitRepoBranchesRequest'
      responses:
        '200':
          description: Repository branches fetched successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoBranchesResponse'
        '400':
          description: Invalid repository URL or request payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Repository not found or is private
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '429':
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '502':
          description: Failed to fetch repository branches from Git provider
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /git/repo/branch/fetch-content:
    post:
      summary: Fetch Git repository content
      description: |
        Fetches and returns the directory and file structure of a specified public Git repository with depth-based pagination.
        This endpoint supports multiple Git providers including GitHub, GitLab, and Bitbucket.
        The provider can be specified explicitly or will be auto-detected from the repository URL.
        
        **Depth-Based Pagination:**
        Use the optional `depth` query parameter to limit repository traversal depth. For example:
        - `depth=1`: Returns only root-level files and directories
        - `depth=2`: Returns files and directories within two levels from the root
        - `depth=0` or omitted: Returns all content (default behavior)
        
        This approach helps balance data completeness and performance by allowing incremental loading of deeper structures.
        The response includes directories (both empty and non-empty) and files at the specified depth levels.
        
        This endpoint is used to verify repository accessibility and display its structure in the API Platform UI
        for API import functionality. Only public repositories are supported.
      operationId: FetchGitRepoContent
      tags:
        - Git Operations
      parameters:
        - $ref: '#/components/parameters/depth-Q'
      requestBody:
        description: Git repository URL to fetch content from
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GitRepoContentRequest'
      responses:
        '200':
          description: Repository content fetched successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoContentResponse'
        '400':
          description: Invalid repository URL or request payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Repository not found or is private
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '429':
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '502':
          description: Failed to fetch repository content from Git provider
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitRepoError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /devportals:
    post:
      summary: Create a new DevPortal
      description: |
        Creates a new DevPortal within the organization specified in the JWT token.
        Organization ID is automatically extracted from the token and does not need to be provided.
      operationId: CreateDevPortal
      tags:
        - DevPortals
      requestBody:
        description: DevPortal registration details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDevPortalRequest'
      responses:
        '201':
          description: DevPortal created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DevPortalResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          description: DevPortal name already exists within organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: List all DevPortals
      description: |
        Retrieves a list of all registered DevPortals for the organization specified in the JWT token.
        Organization ID is automatically extracted from the token.
      operationId: ListDevPortals
      tags:
        - DevPortals
      parameters:
        - name: limit
          in: query
          description: Maximum number of DevPortals to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of DevPortals to skip
          schema:
            type: integer
            minimum: 0
            default: 0
        - name: default
          in: query
          description: Filter by default DevPortal
          schema:
            type: boolean
        - name: active
          in: query
          description: Filter by active DevPortals
          schema:
            type: boolean
      responses:
        '200':
          description: DevPortals retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DevPortalListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /devportals/default:
    get:
      summary: Get default DevPortal
      description: |
        Retrieves the default DevPortal for the organization specified in the JWT token.
      operationId: GetDefaultDevPortal
      tags:
        - DevPortals
      responses:
        '200':
          description: Default DevPortal retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DevPortalResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Default DevPortal not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /devportals/{devportalId}:
    get:
      summary: Get DevPortal by UUID
      description: |
        Retrieves a specific DevPortal by its UUID. Access is validated against the organization 
        in the JWT token.
      operationId: GetDevPortal
      tags:
        - DevPortals
      parameters:
        - $ref: '#/components/parameters/DevPortalID'
      responses:
        '200':
          description: DevPortal retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DevPortalResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update DevPortal
      description: |
        Updates an existing DevPortal's mutable fields.
        Access is validated against the organization in the JWT token.
      operationId: UpdateDevPortal
      tags:
        - DevPortals
      parameters:
        - $ref: '#/components/parameters/DevPortalID'
      requestBody:
        description: DevPortal object that needs to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDevPortalRequest'
      responses:
        '200':
          description: DevPortal updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DevPortalResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: DevPortal name already exists within organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete DevPortal
      description: |
        Permanently deletes a DevPortal.
        Deletion is blocked if the DevPortal has active API publications.
        Access is validated against the organization in the JWT token.
      operationId: DeleteDevPortal
      tags:
        - DevPortals
      parameters:
        - $ref: '#/components/parameters/DevPortalID'
      responses:
        '204':
          description: DevPortal deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict. DevPortal has active publications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /devportals/{devportalId}/activate:
    post:
      summary: Activate DevPortal
      description: |
        Activates a DevPortal, making it available for API publishing.
        Access is validated against the organization in the JWT token.
      operationId: ActivateDevPortal
      tags:
        - DevPortals
      parameters:
        - $ref: '#/components/parameters/DevPortalID'
      responses:
        '200':
          description: DevPortal activated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /devportals/{devportalId}/deactivate:
    post:
      summary: Deactivate DevPortal
      description: |
        Deactivates a DevPortal, preventing new API publications.
        Access is validated against the organization in the JWT token.
      operationId: DeactivateDevPortal
      tags:
        - DevPortals
      parameters:
        - $ref: '#/components/parameters/DevPortalID'
      responses:
        '200':
          description: DevPortal deactivated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /devportals/{devportalId}/set-default:
    post:
      summary: Set DevPortal as default
      description: |
        Sets a DevPortal as the default for the organization.
        Access is validated against the organization in the JWT token.
      operationId: SetDevPortalAsDefault
      tags:
        - DevPortals
      parameters:
        - $ref: '#/components/parameters/DevPortalID'
      responses:
        '200':
          description: DevPortal set as default successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "DevPortal set as default successfully"
                  devPortalUuid:
                    type: string
                    format: uuid
                    example: "123e4567-e89b-12d3-a456-426614174000"
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-provider-templates:
    post:
      summary: Create a new LLM provider template
      description: |
        Creates a new LLM provider template within the organization.
        Organization is identified via the JWT token.
      operationId: createLLMProviderTemplate
      tags:
        - LLM Provider Templates
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LLMProviderTemplate'
      responses:
        '201':
          description: LLM provider template created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProviderTemplate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: List all LLM provider templates
      description: |
        Retrieve a list of all LLM provider templates for the organization.
      operationId: listLLMProviderTemplates
      tags:
        - LLM Provider Templates
      parameters:
        - name: limit
          in: query
          description: Maximum number of LLM provider templates to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of LLM provider templates to skip
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: List of LLM provider templates
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProviderTemplateListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-provider-templates/{id}:
    get:
      summary: Get LLM provider template by id
      description: Retrieve the complete configuration for a specific LLM provider template.
      operationId: getLLMProviderTemplate
      tags:
        - LLM Provider Templates
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier for the LLM provider template
          schema:
            type: string
          example: openai
      responses:
        '200':
          description: LLM provider template details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProviderTemplate'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update an existing LLM provider template
      description: Update an existing LLM provider template configuration.
      operationId: updateLLMProviderTemplate
      tags:
        - LLM Provider Templates
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the template to update
          schema:
            type: string
          example: openai
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LLMProviderTemplate'
      responses:
        '200':
          description: LLM provider template updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProviderTemplate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete an LLM provider template
      description: Remove an LLM provider template.
      operationId: deleteLLMProviderTemplate
      tags:
        - LLM Provider Templates
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the template to delete
          schema:
            type: string
          example: openai
      responses:
        '204':
          description: LLM provider template deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers:
    post:
      summary: Create a new LLM provider
      description: |
        Deploy a new LLM provider configuration.
      operationId: createLLMProvider
      tags:
        - LLM Providers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LLMProvider'
            example:
              id: wso2-openai-provider
              name: WSO2 OpenAI Provider
              version: v1.0
              template: openai
              upstream:
                main:
                  url: https://api.openai.com
              accessControl:
                mode: deny_all
                exceptions:
                  - path: /chat/completions
                    methods: [ OPTIONS, PATCH ]
              description: Primary OpenAI provider
              context: /openai
              vhost: api.openai.com
              openapi: |-
                openapi: 3.0.3
                info:
                  title: Provider API
                  version: v1.0
                paths: {}
              modelProviders:
                - id: openai
                  name: OpenAI
                  models:
                    - id: gpt-4o-mini
                      name: GPT-4o mini
                      description: Cost-effective general model
              rateLimiting:
                providerLevel:
                  global:
                    request:
                      enabled: true
                      count: 1500
                      reset:
                        duration: 2
                        unit: week
                    token:
                      enabled: true
                      count: 1000000
                      reset:
                        duration: 1
                        unit: month
      responses:
        '201':
          description: LLM provider created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProvider'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: List all LLM providers
      description: Retrieve a list of all LLM providers.
      operationId: listLLMProviders
      tags:
        - LLM Providers
      parameters:
        - name: limit
          in: query
          description: Maximum number of LLM providers to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of LLM providers to skip
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: List of LLM providers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProviderListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}:
    get:
      summary: Get LLM provider by identifier
      description: Retrieve the complete configuration for a specific LLM provider.
      operationId: getLLMProvider
      tags:
        - LLM Providers
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
      responses:
        '200':
          description: LLM provider details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProvider'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update an existing LLM provider
      description: Update the configuration of an existing LLM provider.
      operationId: updateLLMProvider
      tags:
        - LLM Providers
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LLMProvider'
      responses:
        '200':
          description: LLM provider updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProvider'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete an LLM provider
      description: Remove an LLM provider.
      operationId: deleteLLMProvider
      tags:
        - LLM Providers
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
      responses:
        '204':
          description: LLM provider deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}/deployments:
    post:
      summary: Create and deploy a new LLM provider deployment
      description: |
        Creates an immutable deployment artifact for an LLM provider and deploys it to a specified gateway.
        Each deployment targets a single gateway. The providerId parameter is the LLM provider handle (identifier),
        not the UUID. The deployment becomes active immediately on the target gateway.
        Access is validated against the organization in the JWT token.
      operationId: deployLLMProvider
      tags:
        - LLM Provider Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
      requestBody:
        description: Deployment request with gateway ID, base reference, and metadata
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeployAPIRequest'
      responses:
        '201':
          description: LLM provider deployed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          description: Bad Request. Validation errors (missing name, base, gatewayId, or invalid input)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Not Found. LLM provider, gateway, or base deployment not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: Get deployments for an LLM provider
      description: |
        Retrieves all deployment artifacts for a specific LLM provider. The providerId parameter is the
        LLM provider handle (identifier), not the UUID. Supports filtering by gateway UUID and deployment status.
        Access is validated against the organization in the JWT token.
      operationId: getLLMProviderDeployments
      tags:
        - LLM Provider Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
        - $ref: '#/components/parameters/gatewayId-Q'
        - $ref: '#/components/parameters/deploymentStatus-Q'
      responses:
        '200':
          description: Deployments retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}/deployments/{deploymentId}:
    get:
      summary: Get LLM provider deployment by ID
      description: |
        Retrieves metadata for a specific LLM provider deployment artifact including status, gateway association,
        and timestamps. Access is validated against the organization in the JWT token.
      operationId: getLLMProviderDeployment
      tags:
        - LLM Provider Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
        - $ref: '#/components/parameters/deploymentId'
      responses:
        '200':
          description: Deployment metadata retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      summary: Delete LLM provider deployment
      description: |
        Deletes a deployment artifact. Deletion is only allowed when the deployment is in UNDEPLOYED status.
        Access is validated against the organization in the JWT token.
      operationId: deleteLLMProviderDeployment
      tags:
        - LLM Provider Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
        - $ref: '#/components/parameters/deploymentId'
      responses:
        '204':
          description: Deployment deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}/deployments/undeploy:
    post:
      summary: Undeploy LLM provider deployment from gateway
      description: |
        Undeploys an active LLM provider deployment, stopping it from being served on the specified gateway.
        The deployment artifact remains in the system with UNDEPLOYED status and can be restored later.
        Returns the updated deployment object with status changed to UNDEPLOYED.

        Both deploymentId and gatewayId are required for safety. The backend validates that the
        deployment's bound gateway matches the provided gatewayId to prevent unintended operations.
        Access is validated against the organization in the JWT token.
      operationId: undeployLLMProviderDeployment
      tags:
        - LLM Provider Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
        - name: deploymentId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the deployment to undeploy
        - name: gatewayId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the gateway (validated against deployment's bound gateway)
      responses:
        '200':
          description: Deployment undeployed successfully. Returns the updated deployment with UNDEPLOYED status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}/deployments/restore:
    post:
      summary: Restore a previous LLM provider deployment
      description: |
        Activates a previous deployment (ARCHIVED or UNDEPLOYED) by setting it as the current DEPLOYED version
        on the specified gateway. This operation changes the deployment state of the LLM provider on that gateway.
        The target deployment must not already be in DEPLOYED status.

        Both deploymentId and gatewayId are required for safety. The backend validates that the
        deployment's bound gateway matches the provided gatewayId to prevent unintended operations.
        Access is validated against the organization in the JWT token.
      operationId: restoreLLMProviderDeployment
      tags:
        - LLM Provider Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
        - name: deploymentId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the deployment to restore (must be ARCHIVED or UNDEPLOYED)
        - name: gatewayId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the gateway (validated against deployment's bound gateway)
      responses:
        '200':
          description: Deployment restored successfully. Returns the deployment with status changed to DEPLOYED.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict. Cannot restore currently deployed deployment or deployment is invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-proxies/{id}/deployments:
    post:
      summary: Create and deploy a new LLM proxy deployment
      description: |
        Creates an immutable deployment artifact for an LLM proxy and deploys it to a specified gateway.
        Each deployment targets a single gateway. The proxyId parameter is the LLM proxy handle (identifier),
        not the UUID. The deployment becomes active immediately on the target gateway.
        Access is validated against the organization in the JWT token.
      operationId: deployLLMProxy
      tags:
        - LLM Proxy Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
      requestBody:
        description: Deployment request with gateway ID, base reference, and metadata
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeployAPIRequest'
      responses:
        '201':
          description: LLM proxy deployed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          description: Bad Request. Validation errors (missing name, base, gatewayId, or invalid input)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Not Found. LLM proxy, gateway, or base deployment not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: Get deployments for an LLM proxy
      description: |
        Retrieves all deployment artifacts for a specific LLM proxy. The proxyId parameter is the
        LLM proxy handle (identifier), not the UUID. Supports filtering by gateway UUID and deployment status.
        Access is validated against the organization in the JWT token.
      operationId: getLLMProxyDeployments
      tags:
        - LLM Proxy Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
        - $ref: '#/components/parameters/gatewayId-Q'
        - $ref: '#/components/parameters/deploymentStatus-Q'
      responses:
        '200':
          description: Deployments retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-proxies/{id}/deployments/{deploymentId}:
    get:
      summary: Get LLM proxy deployment by ID
      description: |
        Retrieves metadata for a specific LLM proxy deployment artifact including status, gateway association,
        and timestamps. Access is validated against the organization in the JWT token.
      operationId: getLLMProxyDeployment
      tags:
        - LLM Proxy Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
        - $ref: '#/components/parameters/deploymentId'
      responses:
        '200':
          description: Deployment metadata retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      summary: Delete LLM proxy deployment
      description: |
        Deletes a deployment artifact. Deletion is only allowed when the deployment is in UNDEPLOYED status.
        Access is validated against the organization in the JWT token.
      operationId: deleteLLMProxyDeployment
      tags:
        - LLM Proxy Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
        - $ref: '#/components/parameters/deploymentId'
      responses:
        '204':
          description: Deployment deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-proxies/{id}/deployments/undeploy:
    post:
      summary: Undeploy LLM proxy deployment from gateway
      description: |
        Undeploys an active LLM proxy deployment, stopping it from being served on the specified gateway.
        The deployment artifact remains in the system with UNDEPLOYED status and can be restored later.
        Returns the updated deployment object with status changed to UNDEPLOYED.

        Both deploymentId and gatewayId are required for safety. The backend validates that the
        deployment's bound gateway matches the provided gatewayId to prevent unintended operations.
        Access is validated against the organization in the JWT token.
      operationId: undeployLLMProxyDeployment
      tags:
        - LLM Proxy Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
        - name: deploymentId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the deployment to undeploy
        - name: gatewayId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the gateway (validated against deployment's bound gateway)
      responses:
        '200':
          description: Deployment undeployed successfully. Returns the updated deployment with UNDEPLOYED status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-proxies/{id}/deployments/restore:
    post:
      summary: Restore a previous LLM proxy deployment
      description: |
        Activates a previous deployment (ARCHIVED or UNDEPLOYED) by setting it as the current DEPLOYED version
        on the specified gateway. This operation changes the deployment state of the LLM proxy on that gateway.
        The target deployment must not already be in DEPLOYED status.

        Both deploymentId and gatewayId are required for safety. The backend validates that the
        deployment's bound gateway matches the provided gatewayId to prevent unintended operations.
        Access is validated against the organization in the JWT token.
      operationId: restoreLLMProxyDeployment
      tags:
        - LLM Proxy Deployments
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
        - name: deploymentId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the deployment to restore (must be ARCHIVED or UNDEPLOYED)
        - name: gatewayId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the gateway (validated against deployment's bound gateway)
      responses:
        '200':
          description: Deployment restored successfully. Returns the deployment with status changed to DEPLOYED.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict. Cannot restore currently deployed deployment or deployment is invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}/llm-proxies:
    get:
      summary: List LLM proxies by provider
      description: Retrieve a list of LLM proxies that use the specified LLM provider.
      operationId: listLLMProxiesByProvider
      tags:
        - LLM Providers
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of LLM proxies to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of LLM proxies to skip
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: List of LLM proxies
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProxyListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-providers/{id}/api-keys:
    post:
      summary: Create a new API key for an LLM provider
      description: |
        Generates a new API key for the specified LLM provider. The generated key
        is broadcasted to all gateways in the organization and can be used to
        authenticate requests to the LLM provider when API key validation is enabled.
      operationId: createLLMProviderAPIKey
      tags:
        - LLM Providers
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM provider
          schema:
            type: string
          example: wso2-openai-provider
      requestBody:
        description: API key creation details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLLMProviderAPIKeyRequest'
      responses:
        '201':
          description: API key created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateLLMProviderAPIKeyResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: LLM provider not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '503':
          description: No gateway connections available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-proxies:
    post:
      summary: Create a new LLM proxy
      description: |
        Deploy a new LLM proxy configuration.
      operationId: createLLMProxy
      tags:
        - LLM Proxies
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LLMProxy'
      responses:
        '201':
          description: LLM proxy created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProxy'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      summary: List all LLM proxies
      description: Retrieve a list of all LLM proxies. Optionally filter by project using the projectId query parameter.
      operationId: listLLMProxies
      tags:
        - LLM Proxies
      parameters:
        - $ref: '#/components/parameters/projectId-Q'
        - name: limit
          in: query
          description: Maximum number of LLM proxies to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of LLM proxies to skip
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: List of LLM proxies
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProxyListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /llm-proxies/{id}:
    get:
      summary: Get LLM proxy by unique identifier
      description: Retrieve the complete configuration for a specific LLM proxy.
      operationId: getLLMProxy
      tags:
        - LLM Proxies
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
      responses:
        '200':
          description: LLM proxy details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProxy'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      summary: Update an existing LLM proxy
      description: Update the configuration of an existing LLM proxy.
      operationId: updateLLMProxy
      tags:
        - LLM Proxies
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LLMProxy'
      responses:
        '200':
          description: LLM proxy updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LLMProxy'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      summary: Delete an LLM proxy
      description: Remove an LLM proxy.
      operationId: deleteLLMProxy
      tags:
        - LLM Proxies
      parameters:
        - name: id
          in: path
          required: true
          description: Unique identifier of the LLM proxy
          schema:
            type: string
      responses:
        '204':
          description: LLM proxy deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT access token issued by Thunder STS. The token must contain an `organization` claim 
        that identifies the user's organization. All API operations are automatically scoped 
        to this organization.
        
        Example: `Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...`

  schemas:
    Organization:
      type: object
      required:
        - id
        - handle
        - name
        - region
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the organization
          readOnly: true
          example: "123e4567-e89b-12d3-a456-426614174000"
        handle:
          type: string
          description: URL-friendly unique handle for the organization
          pattern: '^[a-z0-9-]+$'
          minLength: 1
          example: "acme"
        name:
          type: string
          description: Display name of the organization
          example: "Acme Corporation"
        region:
          type: string
          description: Geographic region where the organization operates
          example: "us"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the organization was created
          readOnly: true
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the organization was last updated
          readOnly: true
          example: "2023-10-12T10:30:00Z"

    CreateProjectRequest:
      description: |
        Request body for creating a project. Organization ID is automatically extracted
        from the JWT token and does not need to be provided.
      type: object
      required:
        - name
      properties:
        id:
          type: string
          format: uuid
          description: UUID of the project
          minLength: 36
          example: "7d7a51fd-daa1-4095-b7ff-98a1aa05cc0f"
        name:
          type: string
          description: Name of the project
          minLength: 1
          example: "Default Project"
        description:
          type: string
          description: Description of the project
          example: "This is the default project for development"

    UpdateProjectRequest:
      type: object
      properties:
        name:
          type: string
          description: Name of the project
          minLength: 1
          example: "Updated Project Name"
        description:
          type: string
          description: Description of the project
          example: "Updated project description"

    Project:
      type: object
      required:
        - name
        - organizationId
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the project
          readOnly: true
          example: "yr434567-de34-76uj6-w376-234324532"
        name:
          type: string
          description: Name of the project
          minLength: 1
          example: "Default Project"
        description:
          type: string
          description: Description of the project
          example: "This is the default project for development"
        organizationId:
          type: string
          format: uuid
          description: UUID of the organization this project belongs to
          readOnly: true
          example: "123e4567-e89b-12d3-a456-426614174000"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the project was created
          readOnly: true
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the project was last updated
          readOnly: true
          example: "2023-10-12T10:30:00Z"

    API:
      title: API object
      required:
        - name
        - context
        - version
        - projectId
        - organizationId
        - upstream
      type: object
      properties:
        id:
          type: string
          description: Unique handle/identifier for the API. Can be provided during creation or auto-generated.
          example: my-api-handle
        name:
          minLength: 1
          pattern: '(^[^~!@#;:%^*()+={}|\\<>"'',&$\[\]\/]*$)'
          type: string
          example: PizzaShackAPI
        description:
          maxLength: 32766
          type: string
          example: This is a simple API for Pizza Shack online pizza delivery store
        context:
          maxLength: 232
          minLength: 1
          type: string
          example: pizza
        version:
          maxLength: 30
          minLength: 1
          type: string
          pattern: '^[^~!@#;:%^*()+={}|\\<>"'',&/$\[\]\s+\/]+$'
          example: 1.0.0
        createdBy:
          maxLength: 200
          type: string
          description: |
            If the createdBy value is not given user invoking the api will be used as the createdBy.
          example: admin
        projectId:
          type: string
          format: uuid
          description: ID of the project this API belongs to
          example: yr434567-de34-76uj6-w376-234324532
        organizationId:
          type: string
          format: uuid
          description: ID of the organization this API belongs to
          readOnly: true
          example: 123e4567-e89b-12d3-a456-426614174000
        createdAt:
          type: string
          format: date-time
          readOnly: true
          description: Timestamp when the api was created
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          readOnly: true
          description: Timestamp when the api was last updated
          example: "2023-10-12T10:30:00Z"
        upstream:
          $ref: "#/components/schemas/Upstream"
        lifeCycleStatus:
          type: string
          description: Current lifecycle status of the API
          enum:
            - STAGED
            - CREATED
            - PUBLISHED
            - DEPRECATED
            - RETIRED
            - BLOCKED
          example: "CREATED"
        kind:
          type: string
          description: Kind of the API based on its communication protocol or architectural style
          example: RestApi
          default: RestApi
        transport:
          type: array
          description: |
            Supported transports for the API (http and/or https)
          example:
            - http
            - https
          items:
            type: string
        policies:
          type: array
          description: List of policies to be applied on the API
          items:
            $ref: '#/components/schemas/Policy'
        operations:
          type: array
          description: List of operations exposed by this API
          items:
            $ref: '#/components/schemas/Operation'
        channels:
          type: array
          description: List of channels exposed by this API
          items:
            $ref: '#/components/schemas/Channel'
  
    SecurityConfig:
      title: Security Configuration
      description: Defines security mechanisms (API key, OAuth2) applicable to the API
      type: object
      properties:
        enabled:
          type: boolean
          description: Whether security is enabled
          example: true
        apiKey:
          $ref: '#/components/schemas/APIKeySecurity'

    APIKeySecurity:
      title: API Key Security
      description: Configuration for API key based authentication
      type: object
      properties:
        enabled:
          type: boolean
          description: Whether API key authentication is enabled
          example: true
        key:
          type: string
          description: Name of the header or query parameter to be used for the API key
          example: "X-API-Key"
        in:
          type: string
          description: Location of the API key (header or query)
          enum:
            - header
            - query
          example: "header"
        
    Operation:
      title: API Operation
      type: object
      description: Defines a single operation (resource) within the API
      required:
        - request
      properties:
        name:
          type: string
          description: Name of the operation
          example: "getPetById"
        description:
          type: string
          description: Description of the operation
          example: "Find pet by ID"
        request:
          $ref: "#/components/schemas/OperationRequest"

    Channel:
      title: Async API Channel
      type: object
      description: Defines a single channel within the Async API
      required:
        - request
      properties:
        name:
          type: string
          description: Name of the channel
          example: "issues"
        description:
          type: string
          description: Description of the channel
          example: "Channel for order events"
        request:
          $ref: "#/components/schemas/ChannelRequest"

    OperationRequest:
      title: Operation Request
      type: object
      description: Request details for an API operation
      required:
        - method
        - path
      properties:
        method:
          type: string
          description: HTTP method for the operation
          enum:
            - GET
            - POST
            - PUT
            - DELETE
            - PATCH
            - HEAD
            - OPTIONS
          example: "GET"
        path:
          type: string
          description: Resource path for the operation
          example: "/pet/{petId}"
        policies:
          type: array
          description: List of policies to be applied on the operation
          items:
            $ref: "#/components/schemas/Policy"

    ChannelRequest:
      title: Channel Request
      type: object
      description: Request details for a channel within the Async API
      required:
        - method
        - name
      properties:
        method:
          type: string
          description: Async method for the channel
          enum:
            - SUB
          example: "SUB"
        name:
          type: string
          description: Channel name for the event
          example: "issues"
        policies:
          type: array
          description: List of policies to be applied on the operation
          items:
            $ref: "#/components/schemas/Policy"

    Policy:
      title: Policy Configuration
      type: object
      description: Defines a request or response policy applied at runtime
      required:
        - name
        - version
      properties:
        executionCondition:
          type: string
          description: Conditional expression that determines when this policy executes
          example: "request.header.x-custom == 'enabled'"
        name:
          type: string
          description: Name of the policy to apply
          example: "SET_HEADER"
        params:
          type: object
          description: Key-value pairs of parameters for the policy
          additionalProperties: true
          example:
            key: "MyHeader"
            value: "MyValue"
        version:
          type: string
          description: Semantic version of the policy
          example: "1.0.0"

    AddGatewayToAPIRequest:
      title: AddGatewayToAPIRequest object with basic gateway details
      type: object
      required:
        - gatewayId
      properties:
        gatewayId:
          type: string
          format: uuid
          example: "987e6543-e21b-45d3-a789-426614174999"

    APIGatewayListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of gateways in current response
          example: 3
        list:
          type: array
          description: List of gateways associated with the API, including deployment details when deployed
          items:
            $ref: '#/components/schemas/APIGatewayResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'

    APIGatewayResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/GatewayResponse'
        - type: object
          required:
            - associatedAt
            - isDeployed
          properties:
            associatedAt:
              type: string
              format: date-time
              description: Timestamp when the gateway was associated with the API
              example: "2025-10-15T10:30:00Z"
            isDeployed:
              type: boolean
              description: Whether the API is currently deployed to this gateway
              example: true
            deployment:
              $ref: '#/components/schemas/APIDeploymentDetails'
              description: Deployment details (only present when isDeployed is true)

    APIDeploymentDetails:
      type: object
      description: Details about API deployment to a specific gateway
      required:
        - status
        - deployedAt
      properties:
        status:
          description: Current deployment status
          type: string
          example: CREATED
          default: CREATED
          enum:
            - CREATED
            - APPROVED
            - REJECTED
        deployedAt:
          type: string
          format: date-time
          description: Timestamp when the API was deployed
          example: "2025-10-15T11:00:00Z"

    CreateGatewayRequest:
      description: |
        Request body for creating a gateway. Organization ID is automatically extracted 
        from the JWT token and does not need to be provided.
      type: object
      required:
        - name
        - displayName
        - vhost
        - functionalityType
      properties:
        name:
          type: string
          pattern: '^[a-z0-9-]+$'
          minLength: 3
          maxLength: 64
          description: URL-friendly gateway identifier (lowercase alphanumeric with hyphens, unique per organization)
          example: "prod-gateway-01"
        displayName:
          type: string
          minLength: 1
          maxLength: 128
          description: Human-readable gateway name
          example: "Production Gateway 01"
        description:
          type: string
          description: Description of the gateway
          example: "Production gateway for handling API traffic"
        vhost:
          type: string
          description: Virtual host (domain name) for the gateway
          maxLength: 255
          minLength: 1
          # hostname regex as per RFC 1123 (http://tools.ietf.org/html/rfc1123) and appended *
          pattern: '^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$'
          example: mg.wso2.com
        isCritical:
          type: boolean
          description: Whether the gateway is critical for production
          default: false
          example: true
        functionalityType:
          type: string
          enum: [regular, ai, event]
          description: Type of gateway functionality
          default: regular
          example: "regular"
        properties:
          type: object
          additionalProperties: true
          description: Custom key-value properties for the gateway
          example: {"region": "us-west", "tier": "premium"}

    GatewayResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the gateway
          example: "987e6543-e21b-45d3-a789-426614174999"
        organizationId:
          type: string
          format: uuid
          description: UUID of the organization this gateway belongs to
          example: "123e4567-e89b-12d3-a456-426614174000"
        name:
          type: string
          description: URL-friendly gateway identifier
          example: "prod-gateway-01"
        displayName:
          type: string
          description: Human-readable gateway name
          example: "Production Gateway 01"
        description:
          type: string
          description: Description of the gateway
          example: "Production gateway for handling API traffic"
        properties:
          type: object
          additionalProperties: true
          description: Custom key-value properties for the gateway
          example: {"region": "us-west", "tier": "premium"}
        vhost:
          type: string
          description: Virtual host (domain name) for the gateway
          example: mg.wso2.com
        isCritical:
          type: boolean
          description: Whether the gateway is critical for production
          example: true
        functionalityType:
          type: string
          enum: [regular, ai, event]
          description: Type of gateway functionality
          example: "regular"
        isActive:
          type: boolean
          description: Indicates if the gateway is currently connected to the platform via WebSocket
          example: true
        createdAt:
          type: string
          format: date-time
          description: Timestamp when gateway was registered
          example: "2025-10-14T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when gateway was last updated
          example: "2025-10-14T10:30:00Z"

    UpdateGatewayRequest:
      type: object
      properties:
        displayName:
          type: string
          minLength: 1
          maxLength: 128
          description: Human-readable gateway name
          example: "Updated Production Gateway"
        description:
          type: string
          description: Description of the gateway
          example: "Updated gateway description"
        isCritical:
          type: boolean
          description: Whether the gateway is critical for production
          example: true
        properties:
          type: object
          additionalProperties: true
          description: Custom key-value properties for the gateway
          example: {"region": "us-west", "tier": "premium"}

    Pagination:
      type: object
      required:
        - total
        - offset
        - limit
      properties:
        total:
          type: integer
          description: Total number of items available across all pages
          example: 10
        offset:
          type: integer
          description: Zero-based index of first item in current response
          example: 0
        limit:
          type: integer
          description: Maximum number of items returned per page
          example: 10

    GatewayListResponse:
      title: GatewayListResponse for paginated gateway results
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of items in current response
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/GatewayResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'

    GatewayStatusResponse:
      type: object
      description: Lightweight gateway status information optimized for frequent polling
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the gateway
          example: "987e6543-e21b-45d3-a789-426614174999"
        name:
          type: string
          description: URL-friendly gateway identifier
          example: "prod-gateway-01"
        isActive:
          type: boolean
          description: Indicates if the gateway is currently connected to the platform via WebSocket
          example: true
        isCritical:
          type: boolean
          description: Whether the gateway is critical for production
          example: true

    GatewayStatusListResponse:
      type: object
      description: List of gateway status information for polling
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of items in current response
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/GatewayStatusResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ProjectListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of items in current response
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/Project'
        pagination:
          $ref: '#/components/schemas/Pagination'

    APIListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of items in current response
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/API'
        pagination:
          $ref: '#/components/schemas/Pagination'

    TokenRotationResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the newly generated token
          example: "def45678-g901-23hi-j456-789012klmnop"
        token:
          type: string
          description: Plain-text new authentication token (only exposed once during rotation)
          example: "nM8pQ1rT4vW7yZ0bC3eF6hI9kL2nO5qR8tU1wX4zA7cE0fH3jK6mP9sV2yB5dG8i"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when new token was created
          example: "2025-10-15T14:20:00Z"
        message:
          type: string
          description: Informational message about token rotation
          example: "New token generated successfully. Old token remains active until revoked."

    GitRepoBranchesRequest:
      type: object
      required:
        - repoUrl
      properties:
        repoUrl:
          type: string
          format: uri
          description: URL of the public Git repository to fetch branches from
          example: "https://github.com/example-org/sample-api"
        provider:
          type: string
          enum: ["github", "gitlab", "bitbucket"]
          description: Git provider (optional - will be auto-detected if not provided)
          example: "github"

    GitRepoBranchesResponse:
        type: object
        required:
          - repoUrl
          - branches
        properties:
          repoUrl:
            type: string
            format: uri
            description: URL of the repository that was fetched
            example: "https://github.com/example-org/sample-api"
          branches:
            type: array
            items:
              $ref: '#/components/schemas/GitRepoBranch'

    GitRepoBranch:
      type: object
      required:
        - name
        - isDefault
      properties:
        name:
          type: string
          description: Name of the branch
          example: "main"
        isDefault:
          type: string
          description: Whether this branch is the default branch
          example: "true"

    GitRepoContentRequest:
      type: object
      required:
        - repoUrl
        - branch
      properties:
        repoUrl:
          type: string
          format: uri
          description: URL of the public Git repository to fetch content from
          example: "https://github.com/example-org/sample-api"
        branch:
          type: string
          description: Branch of the repository to fetch content from
          example: "main"
        provider:
          type: string
          enum: ["github", "gitlab", "bitbucket"]
          description: Git provider (optional - will be auto-detected if not provided)
          example: "github"

    GitRepoContentResponse:
      type: object
      required:
        - repoUrl
        - branch
        - items
        - totalItems
        - maxDepth
        - requestedDepth
      properties:
        repoUrl:
          type: string
          format: uri
          description: URL of the repository that was fetched
          example: "https://github.com/example-org/sample-api"
        branch:
          type: string
          description: Branch of the repository that was fetched
          example: "main"
        items:
          type: array
          items:
            $ref: '#/components/schemas/GitRepoItem'
          description: List of files and directories in the repository
        totalItems:
          type: integer
          description: Total number of items returned
          example: 15
        maxDepth:
          type: integer
          description: Maximum depth level that was actually traversed
          example: 2
        requestedDepth:
          type: integer
          description: Requested depth level (0 = unlimited)
          example: 2

    GitRepoItem:
      type: object
      required:
        - path
        - subPath
        - children
        - type
      properties:
        path:
          type: string
          description: Full path of the item within the repository
          example: "docs/README.md"
        subPath:
          type: string
          description: Name of the item (file or directory)
          example: "README.md"
        children:
          type: array
          items:
            $ref: '#/components/schemas/GitRepoItem'
        type:
          type: string
          description: Type of the item (file or directory)
          enum: [ tree, blob, EOF ]
          example: "tree"

    GitRepoError:
      type: object
      required:
        - error
        - code
        - message
      properties:
        error:
          type: string
          description: High-level error type
          example: "FETCH_FAILED"
        code:
          type: string
          description: Specific error code for programmatic handling
          example: "GIT_003"
        message:
          type: string
          description: Human-readable error message
          example: "Repository not found or is private"

    TokenInfoResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Token UUID
          example: "abc12345-f678-90de-f123-456789abcdef"
        status:
          type: string
          enum: [active, revoked]
          description: Current token status
          example: "active"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when token was created
          example: "2025-10-14T10:30:00Z"
        revokedAt:
          type: string
          format: date-time
          nullable: true
          description: Timestamp when token was revoked (null if active)
          example: null

    CreateAPIRequest:
      allOf:
        - $ref: '#/components/schemas/API'
        - type: object
          required:
            - name
            - context
            - version
            - projectId

    UpdateAPIRequest:
      allOf:
        - $ref: '#/components/schemas/API'

    Error:
      title: Error object returned
      required:
        - code
        - message
      type: object
      properties:
        code:
          type: integer
          format: int64
        message:
          type: string
          description: Error message
        description:
          type: string
          description: A detailed description about the error message

    GatewayArtifact:
      type: object
      required:
        - id
        - name
        - type
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Handle of the artifact
          example: "inventory-api"
        name:
          type: string
          description: Name of the artifact
          example: "Inventory API"
        type:
          type: string
          enum: ["API", "MCP", "API_PRODUCT"]
          description: Type of artifact deployed to the gateway
          example: "API"
        subType:
          type: string
          enum: ["REST", "ASYNC", "GQL", "WEBSOCKET", "SOAP"]
          description: Subtype of the artifact (for APIs - type of API)
          example: "REST"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the artifact was created
          example: "2025-10-27T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the artifact was last updated
          example: "2025-10-27T11:45:00Z"

    GatewayArtifactListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of items in current response
          example: 5
        list:
          type: array
          description: Array of gateway artifact objects
          items:
            $ref: '#/components/schemas/GatewayArtifact'
        pagination:
          $ref: '#/components/schemas/Pagination'

    CreateDevPortalRequest:
      type: object
      required:
        - name
        - apiUrl
        - hostname
        - apiKey
        - identifier
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Display name of the DevPortal
          example: "My DevPortal"
        apiUrl:
          type: string
          format: uri
          description: API URL of the DevPortal
          example: "https://api.devportal.com"
        hostname:
          type: string
          description: Hostname of the DevPortal
          example: "devportal.example.com"
        apiKey:
          type: string
          description: API key for authentication with the DevPortal
          example: "secret-api-key"
        headerKeyName:
          type: string
          description: Custom header name for API key (optional)
          example: "X-API-Key"
        visibility:
          type: string
          enum: ["public", "private"]
          description: Visibility of the DevPortal
          default: "private"
          example: "private"
        description:
          type: string
          maxLength: 500
          description: Description of the DevPortal
          example: "Development portal for testing APIs"
        identifier:
          type: string
          minLength: 1
          maxLength: 100
          description: Unique identifier for the DevPortal
          example: "dev-portal-01"

    UpdateDevPortalRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Display name of the DevPortal
          example: "Updated DevPortal"
        apiUrl:
          type: string
          format: uri
          description: API URL of the DevPortal
          example: "https://api.devportal.com"
        hostname:
          type: string
          description: Hostname of the DevPortal
          example: "devportal.example.com"
        apiKey:
          type: string
          description: API key for authentication with the DevPortal
          example: "new-secret-api-key"
        headerKeyName:
          type: string
          description: Custom header name for API key (optional)
          example: "X-API-Key"
        visibility:
          type: string
          enum: ["public", "private"]
          description: Visibility of the DevPortal
          example: "public"
        description:
          type: string
          maxLength: 500
          description: Description of the DevPortal
          example: "Updated description"

    DevPortalResponse:
      type: object
      required:
        - uuid
        - organizationUuid
        - name
        - identifier
        - uiUrl
        - apiUrl
        - hostname
        - isActive
        - isEnabled
        - isDefault
        - visibility
        - createdAt
        - updatedAt
      properties:
        uuid:
          type: string
          format: uuid
          description: Unique identifier for the DevPortal
          example: "123e4567-e89b-12d3-a456-426614174000"
        organizationUuid:
          type: string
          format: uuid
          description: UUID of the organization this DevPortal belongs to
          example: "123e4567-e89b-12d3-a456-426614174000"
        name:
          type: string
          description: Display name of the DevPortal
          example: "My DevPortal"
        identifier:
          type: string
          description: Unique identifier for the DevPortal
          example: "dev-portal-01"
        uiUrl:
          type: string
          format: uri
          description: UI URL of the DevPortal
          example: "https://devportal.example.com"
        apiUrl:
          type: string
          format: uri
          description: API URL of the DevPortal
          example: "https://api.devportal.com"
        hostname:
          type: string
          description: Hostname of the DevPortal
          example: "devportal.example.com"
        isActive:
          type: boolean
          description: Whether the DevPortal is currently active
          example: true
        isEnabled:
          type: boolean
          description: Whether the DevPortal is enabled
          example: true
        headerKeyName:
          type: string
          description: Custom header name for API key
          example: "X-API-Key"
        isDefault:
          type: boolean
          description: Whether this is the default DevPortal for the organization
          example: false
        visibility:
          type: string
          enum: ["public", "private"]
          description: Visibility of the DevPortal
          example: "private"
        description:
          type: string
          description: Description of the DevPortal
          example: "Development portal for testing APIs"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the DevPortal was created
          example: "2025-10-15T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the DevPortal was last updated
          example: "2025-10-15T10:30:00Z"

    DevPortalListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of DevPortals in current response
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/DevPortalResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'

    CommonResponse:
      type: object
      required:
        - success
        - message
        - timestamp
      properties:
        success:
          type: boolean
          description: Whether the operation was successful
          example: true
        message:
          type: string
          description: Response message
          example: "Operation completed successfully"
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the response
          example: "2025-10-15T10:30:00Z"

    APIDevPortalResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/DevPortalResponse'
        - type: object
          required:
            - associatedAt
            - isPublished
          properties:
            associatedAt:
              type: string
              format: date-time
              description: Timestamp when the DevPortal was associated with the API
              example: "2025-10-15T10:30:00Z"
            isPublished:
              type: boolean
              description: Whether the API is currently published to this DevPortal
              example: true
            publication:
              $ref: '#/components/schemas/APIPublicationDetails'
              description: Publication details (only present when isPublished is true)

    APIDevPortalListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          description: Number of DevPortals in current response
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/APIDevPortalResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'

    APIPublicationDetails:
      type: object
      description: Details about API publication to a specific DevPortal
      required:
        - status
        - publishedAt
        - updatedAt
      properties:
        status:
          type: string
          description: Current publication status
          enum: ["published", "failed", "publishing"]
          example: "published"
        apiVersion:
          type: string
          description: Version of the API that was published
          example: "1.0.0"
        devPortalRefId:
          type: string
          description: Reference ID in the DevPortal
          example: "api-12345"
        sandboxEndpoint:
          type: string
          description: Sandbox endpoint URL
          example: "https://sandbox.api.example.com"
        productionEndpoint:
          type: string
          description: Production endpoint URL
          example: "https://api.example.com"
        publishedAt:
          type: string
          format: date-time
          description: Timestamp when the API was published
          example: "2025-10-15T11:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the publication was last updated
          example: "2025-10-15T11:00:00Z"

    PublishToDevPortalRequest:
      type: object
      required:
        - devPortalUuid
        - endPoints
      properties:
        devPortalUuid:
          type: string
          format: uuid
          description: UUID of the DevPortal to publish to
          example: "123e4567-e89b-12d3-a456-426614174000"
        apiInfo:
          $ref: '#/components/schemas/PublishAPIInfo'
        endPoints:
          $ref: '#/components/schemas/EndPoints'
        subscriptionPolicies:
          type: array
          description: List of subscription policies for the API
          items:
            type: string
          example: ["Unlimited", "Gold", "Silver"]

    UnpublishFromDevPortalRequest:
      type: object
      required:
        - devPortalUuid
      properties:
        devPortalUuid:
          type: string
          format: uuid
          description: UUID of the DevPortal to unpublish from
          example: "123e4567-e89b-12d3-a456-426614174000"

    PublishAPIInfo:
      type: object
      description: User-overridable API metadata for publishing
      properties:
        apiName:
          type: string
          description: Name of the API
          example: "Pet Store API"
        apiDescription:
          type: string
          description: Description of the API
          example: "A sample API for pet store operations"
        apiType:
          type: string
          description: Type of the API
          example: "HTTP"
        visibility:
          type: string
          description: Visibility of the API
          enum: ["public", "private", "restricted"]
          example: "public"
        visibleGroups:
          type: array
          description: Groups that can see the API
          items:
            type: string
          example: ["admin", "developer"]
        tags:
          type: array
          description: Tags for the API
          items:
            type: string
          example: ["petstore", "sample"]
        owners:
          $ref: '#/components/schemas/Owners'
        labels:
          type: array
          description: Labels for the API
          items:
            type: string
          example: ["label1", "label2"]

    Owners:
      type: object
      description: API ownership information
      properties:
        technicalOwner:
          type: string
          description: Technical owner of the API
          example: "John Doe"
        technicalOwnerEmail:
          type: string
          description: Email of the technical owner
          example: "john.doe@example.com"
        businessOwner:
          type: string
          description: Business owner of the API
          example: "Jane Smith"
        businessOwnerEmail:
          type: string
          description: Email of the business owner
          example: "jane.smith@example.com"

    EndPoints:
      type: object
      description: Production and sandbox endpoints
      properties:
        productionURL:
          type: string
          format: uri
          description: Production endpoint URL
          example: "https://api.example.com/v1"
        sandboxURL:
          type: string
          format: uri
          description: Sandbox endpoint URL
          example: "https://sandbox.api.example.com/v1"

    PublishAPIResponse:
      type: object
      required:
        - message
        - apiId
        - devPortalRefId
        - publishedAt
      properties:
        message:
          type: string
          description: Human-readable success message
          example: "API published successfully to DevPortal"
        apiId:
          type: string
          format: uuid
          description: Platform-api API identifier
          example: "1f01c9b2-440b-4cfe-bf48-f8f168062df4"
        devPortalRefId:
          type: string
          description: DevPortal reference ID for the published API
          example: "1f01c9b2-440b-4cfe-bf48-f8f168062df4"
        publishedAt:
          type: string
          format: date-time
          description: Timestamp of publication
          example: "2025-10-29T21:25:09.418859918+05:30"

    UnpublishAPIResponse:
      type: object
      required:
        - message
        - apiId
        - unpublishedAt
      properties:
        message:
          type: string
          description: Human-readable success message
          example: "API unpublished successfully from DevPortal"
        apiId:
          type: string
          format: uuid
          description: Platform-api API identifier
          example: "1f01c9b2-440b-4cfe-bf48-f8f168062df4"
        unpublishedAt:
          type: string
          format: date-time
          description: Timestamp when API was unpublished
          example: "2025-10-29T21:08:59.834784232+05:30"

    ValidateAPIProjectRequest:
      type: object
      required:
        - repoUrl
        - branch
        - path
      properties:
        repoUrl:
          type: string
          format: uri
          description: URL of the public Git repository
          example: "https://github.com/example-org/sample-api"
        provider:
          type: string
          enum: [ "github", "gitlab", "bitbucket" ]
          description: Git provider (optional - will be auto-detected if not provided)
          example: "github"
        branch:
          type: string
          description: Branch of the repository to import from
          example: "main"
        path:
          type: string
          description: Path within the repository where the API project is located
          example: "apis/inventory-api"

    ValidateOpenAPIRequest:
      type: object
      description: |
        Request for validating OpenAPI definition. Can include either a URL, a file upload, 
        or both. If both are provided, the validation service can choose which to prioritize.
      properties:
        url:
          type: string
          format: uri
          description: URL to fetch the OpenAPI definition from
          example: "https://petstore3.swagger.io/api/v3/openapi.json"
        definition:
          type: string
          format: binary
          description: OpenAPI definition file upload (YAML or JSON)
      anyOf:
        - required: [url]
        - required: [definition]

    ImportOpenAPIRequest:
      type: object
      required:
        - api
      description: |
        Multipart form data request for importing OpenAPI definition. All fields are provided as form data.
        Either 'url' or 'definition' must be provided to specify the OpenAPI source, and 'api' is required
        to provide the API details for creation. If the OpenAPI definition is valid and successfully imported,
        and the api details are valid an API will be created.
      properties:
        url:
          type: string
          format: uri
          description: |
            Form field containing URL to fetch the OpenAPI definition from.
          example: "https://petstore3.swagger.io/api/v3/openapi.json"
        definition:
          type: string
          format: binary
          description: |
            Form field for OpenAPI definition file upload (YAML or JSON).
            This should be provided as a file upload in the multipart form.
        api:
          type: string
          description: |
            Form field containing JSON-encoded API details for the imported OpenAPI.
            This must be a JSON string containing the API configuration.
            Required fields within the JSON: name, context, version, projectId.
          example: |
            {
              "id": "petstore-api-1"
              "name": "PetStore API",
              "description": "This is a sample Pet Store Server",
              "context": "/petstore",
              "version": "1.0.0",
              "provider": "PetStore Inc",
              "projectId": "550e8400-e29b-41d4-a716-446655440000",
              "type": "HTTP",
              "transport": ["http", "https"]
            }
      anyOf:
        - required: [ url ]
        - required: [ definition ]

    APIProjectValidationResponse:
      type: object
      required:
        - isAPIProjectValid
        - isAPIConfigValid
        - isAPIDefinitionValid
      properties:
        isAPIProjectValid:
          type: boolean
          description: Indicates if the API project structure is valid
          example: true
        isAPIConfigValid:
          type: boolean
          description: Indicates if the API configuration file is valid
          example: true
        isAPIDefinitionValid:
          type: boolean
          description: Indicates if the API definition file is valid
          example: true
        errors:
          type: array
          description: List of validation errors encountered
          items:
            type: string
          example: [ "Missing API definition file", "Invalid API configuration format" ]
        api:
          allOf:
            - $ref: '#/components/schemas/API'
            - type: object
              description: Details for the validated API project
              required:
                - name
                - description
                - context
                - version
                - projectId
                - operations

    OpenAPIValidationResponse:
      type: object
      required:
        - isAPIDefinitionValid
      properties:
        isAPIDefinitionValid:
          type: boolean
          description: Indicates if the API definition file is valid
          example: true
        errors:
          type: array
          description: List of validation errors encountered
          items:
            type: string
          example: [ "Missing OpenAPI definition", "Invalid OpenAPI definition" ]
        api:
          allOf:
            - $ref: '#/components/schemas/API'
            - type: object
              description: Details for the validated API
              required:
                - name
                - version
                - operations
    
    ImportAPIProjectRequest:
        type: object
        required:
            - repoUrl
            - branch
            - path
            - api
        properties:
          repoUrl:
            type: string
            format: uri
            description: URL of the public Git repository
            example: "https://github.com/example-org/sample-api"
          provider:
            type: string
            enum: [ "github", "gitlab", "bitbucket" ]
            description: Git provider (optional - will be auto-detected if not provided)
            example: "github"
          branch:
            type: string
            description: Branch of the repository to import from
            example: "main"
          path:
            type: string
            description: Path within the repository where the API project is located
            example: "apis/inventory-api"
          api:
            allOf:
              - $ref: '#/components/schemas/API'
              - type: object
                description: API details for the imported project
                required:
                  - name
                  - context
                  - version
                  - projectId

    APIValidationResponse:
      type: object
      required:
        - valid
        - error
      properties:
        valid:
          type: boolean
          description: Whether the API identifier or name-version combination is valid (not already in use) in the organization
          example: true
        error:
          type: object
          nullable: true
          description: Error details if validation fails
          properties:
            code:
              type: string
              description: Error code indicating the type of validation failure
              example: "api-already-exists"
            message:
              type: string
              description: Human-readable error message
              example: "The API nameversion combination is already in use."
          required:
            - code
            - message

    DeployAPIRequest:
      type: object
      required:
        - name
        - base
        - gatewayId
      properties:
        name:
          type: string
          description: Name/label for this deployment (e.g., "v1.0-prod", "hotfix-2024-01-15")
          example: "v1.0-production"
        base:
          type: string
          description: The source for the API definition. Can be "current" (latest working copy) or a deploymentId (existing deployment)
          example: "current"
        gatewayId:
          type: string
          format: uuid
          description: The target gateway UUID for this deployment
        metadata:
          type: object
          additionalProperties: true
          description: Optional metadata for the deployment (e.g., endpointUrl overrides)

    DeploymentResponse:
      type: object
      required:
        - deploymentId
        - name
        - gatewayId
        - status
        - createdAt
      properties:
        deploymentId:
          type: string
          format: uuid
          description: Unique identifier for the deployment
        name:
          type: string
          description: Name/label for this deployment
          example: "v1.0-production"
        gatewayId:
          type: string
          format: uuid
          description: UUID of the gateway
        status:
          type: string
          enum:
            - DEPLOYED
            - UNDEPLOYED
            - ARCHIVED
          description: |
            Current deployment lifecycle state:
            - DEPLOYED: Currently active on the gateway
            - UNDEPLOYED: Suspended but can be rolled back
            - ARCHIVED: Historical deployment, can be rolled back
        baseDeploymentId:
          type: string
          format: uuid
          nullable: true
          description: UUID of the base deployment this was created from
        metadata:
          type: object
          additionalProperties: true
          description: Metadata associated with the deployment
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the deployment artifact was created
        updatedAt:
          type: string
          format: date-time
          nullable: true
          description: Timestamp when the deployment status last changed (null for ARCHIVED deployments)

    DeploymentListResponse:
      type: object
      required:
        - count
        - list
      properties:
        count:
          type: integer
          description: Total number of deployments
        list:
          type: array
          items:
            $ref: '#/components/schemas/DeploymentResponse'
          description: List of deployments

    Upstream:
      type: object
      description: Upstream backend configuration with main and sandbox endpoints
      required:
        - main
      properties:
        main:
          $ref: '#/components/schemas/UpstreamDefinition'
        sandbox:
          $ref: '#/components/schemas/UpstreamDefinition'

    UpstreamDefinition:
      type: object
      oneOf:
        - required: [ "url" ]
        - required: [ "ref" ]
      description: Upstream endpoint configuration (single target or reference)
      properties:
        url:
          type: string
          format: uri
          description: Direct backend URL to route traffic to
          example: http://prod-backend:5000/api/v2
        ref:
          type: string
          description: Reference to a predefined upstreamDefinition
        auth:
          $ref: '#/components/schemas/UpstreamAuth'

    UpstreamAuth:
      type: object
      description: Authentication configuration for upstream endpoints
      properties:
        type:
          type: string
          description: Authentication type
          enum: [ basic, bearer, api-key ]
          example: api-key
        header:
          type: string
          description: Header name for api-key authentication (e.g., 'Authorization' for bearer/basic, custom header for api-key)
          example: X-API-Key
        value:
          type: string
          description: Authentication value (API key, Bearer token, or Base64 encoded credentials for basic auth)
          example: my-api-key-value

    ExtractionIdentifier:
      type: object
      required:
        - location
        - identifier
      properties:
        location:
          type: string
          description: Where to find the token information
          enum:
            - payload
            - header
            - queryParam
            - pathParam
          example: payload
        identifier:
          type: string
          description: JSONPath expression or header name to identify the token value
          example: $.usage.inputTokens

    LLMProviderTemplateAuth:
      type: object
      properties:
        type:
          type: string
          description: Authentication type used by the LLM provider template
          example: bearer
        header:
          type: string
          description: Header name to send the auth value
          example: Authorization
        valuePrefix:
          type: string
          description: Prefix to attach before the auth value
          example: "Bearer "

    LLMProviderTemplateMetadata:
      type: object
      properties:
        endpointUrl:
          type: string
          format: uri
          description: Default endpoint URL for the template
          example: https://api.openai.com
        auth:
          $ref: '#/components/schemas/LLMProviderTemplateAuth'
        logoUrl:
          type: string
          format: uri
          description: URL of the provider logo
          example: https://cdn.example.com/logos/openai.svg
        openapiSpecUrl:
          type: string
          format: uri
          description: URL to the OpenAPI specification for the provider
          example: https://api.openai.com/openapi.json

    LLMProviderTemplate:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          description: Unique handle for the template
          example: openai
        name:
          type: string
          description: Human-readable LLM Template name
          minLength: 1
          maxLength: 253
          example: OpenAI
        description:
          type: string
          description: Description of the LLM provider template
          maxLength: 1023
          example: Default OpenAI template
        createdBy:
          type: string
          description: Username of the creator
          readOnly: true
          example: jane.doe
        metadata:
          $ref: '#/components/schemas/LLMProviderTemplateMetadata'
        promptTokens:
          $ref: '#/components/schemas/ExtractionIdentifier'
        completionTokens:
          $ref: '#/components/schemas/ExtractionIdentifier'
        totalTokens:
          $ref: '#/components/schemas/ExtractionIdentifier'
        remainingTokens:
          $ref: '#/components/schemas/ExtractionIdentifier'
        requestModel:
          $ref: '#/components/schemas/ExtractionIdentifier'
        responseModel:
          $ref: '#/components/schemas/ExtractionIdentifier'
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the resource was created
          readOnly: true
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the resource was last updated
          readOnly: true
          example: "2023-10-12T10:30:00Z"

    LLMProviderTemplateListItem:
      type: object
      properties:
        id:
          type: string
          example: openai
        name:
          type: string
          example: OpenAI
        description:
          type: string
          example: Default OpenAI template
        createdBy:
          type: string
          example: jane.doe
        createdAt:
          type: string
          format: date-time
          example: 2025-11-25T10:30:00Z
        updatedAt:
          type: string
          format: date-time
          example: 2025-11-25T10:30:00Z

    LLMProviderTemplateListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          example: 5
        list:
          type: array
          items:
            $ref: '#/components/schemas/LLMProviderTemplateListItem'
        pagination:
          $ref: '#/components/schemas/Pagination'

    LLMAccessControl:
      type: object
      required:
        - mode
      properties:
        mode:
          type: string
          description: Access control mode
          example: deny_all
          enum:
            - allow_all
            - deny_all
        exceptions:
          type: array
          description: Path exceptions to the access control mode
          items:
            $ref: '#/components/schemas/RouteException'

    RouteException:
      type: object
      required:
        - path
        - methods
      properties:
        path:
          type: string
          description: Path pattern
          example: /chat/completions
        methods:
          type: array
          description: HTTP methods
          items:
            type: string
            enum: [ GET, POST, PUT, DELETE, PATCH, OPTIONS, HEAD, "*" ]

    LLMPolicy:
      type: object
      required:
        - name
        - version
        - paths
      properties:
        name:
          type: string
          example: budgetControl
        version:
          type: string
          example: v1.0.0
        paths:
          type: array
          items:
            $ref: '#/components/schemas/LLMPolicyPath'

    LLMPolicyPath:
      type: object
      required:
        - path
        - methods
        - params
      properties:
        path:
          type: string
          example: /chat/completions
        methods:
          type: array
          items:
            type: string
            enum: [ GET, POST, PUT, DELETE, PATCH, OPTIONS, HEAD, "*" ]
        params:
          type: object
          description: JSON Schema describing the parameters accepted by this policy. This itself is a JSON Schema document.
          additionalProperties: true

    LLMRateLimitingConfig:
      type: object
      description: Rate limiting configuration for an LLM provider at provider and consumer levels.
      properties:
        providerLevel:
          $ref: '#/components/schemas/RateLimitingScopeConfig'
        consumerLevel:
          $ref: '#/components/schemas/RateLimitingScopeConfig'
      example:
        providerLevel:
          global:
            request:
              enabled: true
              count: 1500
              reset:
                duration: 2
                unit: week
            token:
              enabled: true
              count: 1000000
              reset:
                duration: 1
                unit: month
        consumerLevel:
          resourceWise:
            default:
              request:
                enabled: true
                count: 50
                reset:
                  duration: 2
                  unit: week
              cost:
                enabled: true
                amount: 100
                reset:
                  duration: 1
                  unit: month
            resources:
              - resource: /models
                limit:
                  request:
                    enabled: true
                    count: 200
                    reset:
                      duration: 1
                      unit: week
                  token:
                    enabled: true
                    count: 100000
                    reset:
                      duration: 1
                      unit: month
              - resource: /chat/completions
                limit:
                  request:
                    enabled: true
                    count: 25
                    reset:
                      duration: 1
                      unit: week
                  cost:
                    enabled: true
                    amount: 10
                    reset:
                      duration: 1
                      unit: month

    RateLimitingScopeConfig:
      type: object
      description: Rate limiting configuration for a scope (provider or consumer). Either global or resource-wise limits can be defined.
      oneOf:
        - required: [ global ]
        - required: [ resourceWise ]
      properties:
        global:
          $ref: '#/components/schemas/RateLimitingLimitConfig'
        resourceWise:
          $ref: '#/components/schemas/ResourceWiseRateLimitingConfig'

    ResourceWiseRateLimitingConfig:
      type: object
      description: Resource-specific limits with a required default limit.
      required:
        - default
        - resources
      properties:
        default:
          $ref: '#/components/schemas/RateLimitingLimitConfig'
        resources:
          type: array
          description: Explicit resource limits that override the default limit.
          items:
            $ref: '#/components/schemas/RateLimitingResourceLimit'

    RateLimitingResourceLimit:
      type: object
      required:
        - resource
        - limit
      properties:
        resource:
          type: string
          description: Explicit resource path to apply the limit to.
          example: /chat/completions
        limit:
          $ref: '#/components/schemas/RateLimitingLimitConfig'

    RateLimitResetWindow:
      type: object
      required: [ duration, unit ]
      properties:
        duration:
          type: integer
          description: Reset duration for the limit window.
          example: 2
          minimum: 1
        unit:
          type: string
          description: Reset time unit for the limit window.
          enum: [ minute, hour, day, week, month ]
          example: week

    RequestRateLimitDimension:
      type: object
      properties:
        enabled:
          type: boolean
          description: Enable request-count based limiting.
        count:
          type: integer
          description: Maximum number of requests in the reset window.
          example: 1500
          minimum: 1
        reset:
          $ref: '#/components/schemas/RateLimitResetWindow'

    TokenRateLimitDimension:
      type: object
      properties:
        enabled:
          type: boolean
          description: Enable token-count based limiting.
        count:
          type: integer
          description: Maximum number of tokens in the reset window.
          example: 1000000
          minimum: 1
        reset:
          $ref: '#/components/schemas/RateLimitResetWindow'

    CostRateLimitDimension:
      type: object
      properties:
        enabled:
          type: boolean
          description: Enable cost-based limiting.
        amount:
          type: number
          format: float
          description: Maximum cost in the reset window.
          example: 1000
          minimum: 0
        reset:
          $ref: '#/components/schemas/RateLimitResetWindow'

    RateLimitingLimitConfig:
      type: object
      description: >-
        Limit definition with independent request/token/cost dimensions.
        If all dimensions are disabled (or absent), rate limiting is off for that scope.
      properties:
        request:
          $ref: '#/components/schemas/RequestRateLimitDimension'
        token:
          $ref: '#/components/schemas/TokenRateLimitDimension'
        cost:
          $ref: '#/components/schemas/CostRateLimitDimension'

    LLMProvider:
      type: object
      required:
        - id
        - name
        - version
        - template
        - upstream
        - accessControl
      properties:
        id:
          type: string
          description: Unique handle for the provider
          example: wso2-openai-provider
        name:
          type: string
          description: Human-readable LLM Provider name
          minLength: 1
          maxLength: 100
          pattern: '^[a-zA-Z0-9\-_\. ]+$'
          example: WSO2 OpenAI Provider
        description:
          type: string
          description: Description of the LLM provider
          maxLength: 1023
          example: Primary OpenAI provider
        createdBy:
          type: string
          description: Username of the creator
          readOnly: true
          example: jane.doe
        version:
          type: string
          description: Semantic version of the LLM Provider
          pattern: '^v\d+\.\d+$'
          example: v1.0
        context:
          type: string
          description: Base path for all API routes (must start with /, no trailing slash)
          pattern: '^\/([a-zA-Z0-9_\-\/]*[^\/])?$'
          default: /
          minLength: 1
          maxLength: 20
          example: /openai
        vhost:
          type: string
          description: >
            Virtual host name used for routing. Supports standard domain names,
            subdomains, or wildcard domains. Must follow RFC-compliant hostname
            rules. Wildcards are only allowed in the left-most label (e.g., *.example.com).
          pattern: '^(\*\.|[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$'
          minLength: 1
          maxLength: 253
          example: "api.openai"
        template:
          type: string
          description: Template name to use for this LLM Provider
          example: openai
        openapi:
          type: string
          description: OpenAPI specification (JSON or YAML) for the provider endpoint
          example: |
            openapi: 3.0.3
            info:
              title: Provider API
              version: v1.0
            paths: {}
        modelProviders:
          type: array
          description: >
            List of model providers and their models supported by this provider. For non-aggregator
            templates, only a single model provider is allowed (aggregator templates: awsbedrock,
            azureaifoundry).
          items:
            $ref: '#/components/schemas/LLMModelProvider'
        upstream:
          $ref: "#/components/schemas/Upstream"
        accessControl:
          $ref: '#/components/schemas/LLMAccessControl'
        rateLimiting:
          $ref: '#/components/schemas/LLMRateLimitingConfig'
        policies:
          type: array
          description: List of policies applied only to this operation (overrides or adds to API-level policies)
          items:
            $ref: "#/components/schemas/LLMPolicy"
        security:
          $ref: '#/components/schemas/SecurityConfig'
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the resource was created
          readOnly: true
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the resource was last updated
          readOnly: true
          example: "2023-10-12T10:30:00Z"

    LLMProviderListItem:
      type: object
      properties:
        id:
          type: string
          example: wso2-openai-provider
        name:
          type: string
          example: WSO2 OpenAI Provider
        description:
          type: string
          example: Primary OpenAI provider
        createdBy:
          type: string
          example: jane.doe
        version:
          type: string
          example: v1.0
        template:
          type: string
          example: openai
        status:
          type: string
          enum:
            - pending
            - deployed
            - failed
          example: deployed
        createdAt:
          type: string
          format: date-time
          example: 2025-11-25T10:30:00Z
        updatedAt:
          type: string
          format: date-time
          example: 2025-11-25T10:30:00Z

    LLMModelProvider:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: Unique model provider identifier
          example: claude
        name:
          type: string
          description: Human-readable model provider name
          example: Claude
        models:
          type: array
          description: Models under this model provider
          items:
            $ref: '#/components/schemas/LLMModel'

    LLMModel:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: Unique model identifier
          example: claude-3-5-sonnet
        name:
          type: string
          description: Human-readable model name
          example: Claude 3.5 Sonnet
        description:
          type: string
          description: Model description
          example: High-quality reasoning model

    LLMProviderListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/LLMProviderListItem'
        pagination:
          $ref: '#/components/schemas/Pagination'

    LLMProxy:
      type: object
      required:
        - id
        - name
        - version
        - projectId
        - provider
      properties:
        id:
          type: string
          description: Unique handle for the proxy
          example: wso2-con-assistant
        name:
          type: string
          description: Human-readable LLM proxy name (must be URL-friendly - only letters, numbers, spaces, hyphens, underscores, and dots allowed)
          minLength: 1
          maxLength: 253
          pattern: '^[a-zA-Z0-9\-_\. ]+$'
          example: wso2-con-assistant
        description:
          type: string
          description: Description of the LLM proxy
          maxLength: 1023
          example: Customer support assistant
        createdBy:
          type: string
          description: Username of the creator
          readOnly: true
          example: jane.doe
        version:
          type: string
          description: Semantic version of the LLM proxy
          pattern: '^v\d+\.\d+$'
          example: v1.0
        projectId:
          type: string
          description: UUID of the project this proxy belongs to
          example: 550e8400-e29b-41d4-a716-446655440000
        context:
          type: string
          description: Base path for all API routes (must start with /, no trailing slash)
          pattern: '^\/([a-zA-Z0-9_\-\/]*[^\/])?$'
          default: /
          minLength: 1
          maxLength: 200
          example: /openai
        vhost:
          type: string
          description: >
            Virtual host name used for routing. Supports standard domain names,
            subdomains, or wildcard domains. Must follow RFC-compliant hostname
            rules. Wildcards are only allowed in the left-most label (e.g., *.example.com).
          pattern: '^(\*\.|[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$'
          minLength: 1
          maxLength: 253
          example: "api.openai"
        provider:
          type: string
          description: Unique id of a deployed llm provider
          example: wso2-openai-provider
        openapi:
          type: string
          description: OpenAPI specification (JSON or YAML) for the proxy endpoint
          example: |
            openapi: 3.0.3
            info:
              title: Proxy API
              version: v1.0
            paths: {}
        policies:
          type: array
          description: List of policies applied only to this operation (overrides or adds to API-level policies)
          items:
            $ref: "#/components/schemas/LLMPolicy"
        security:
          $ref: '#/components/schemas/SecurityConfig'
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the resource was created
          readOnly: true
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the resource was last updated
          readOnly: true
          example: "2023-10-12T10:30:00Z"

    LLMProxyListItem:
      type: object
      properties:
        id:
          type: string
          example: wso2-con-assistant
        name:
          type: string
          example: WSO2 Con Assistant
        description:
          type: string
          example: Customer support assistant
        createdBy:
          type: string
          example: jane.doe
        version:
          type: string
          example: v1.0
        projectId:
          type: string
          description: UUID of the project this proxy belongs to
          example: 550e8400-e29b-41d4-a716-446655440000
        provider:
          type: string
          description: Unique id of a deployed llm provider
          example: wso2-openai-provider
        status:
          type: string
          enum:
            - pending
            - deployed
            - failed
          example: deployed
        createdAt:
          type: string
          format: date-time
          example: 2025-11-25T10:30:00Z
        updatedAt:
          type: string
          format: date-time
          example: 2025-11-25T10:30:00Z

    LLMProxyListResponse:
      type: object
      required:
        - count
        - list
        - pagination
      properties:
        count:
          type: integer
          example: 2
        list:
          type: array
          items:
            $ref: '#/components/schemas/LLMProxyListItem'
        pagination:
          $ref: '#/components/schemas/Pagination'
    CreateLLMProviderAPIKeyRequest:
      type: object
      properties:
        name:
          type: string
          description: Unique identifier for the API key within the LLM provider. If not provided, generated from displayName.
          minLength: 3
          maxLength: 63
          pattern: '^[a-z0-9]+(-[a-z0-9]+)*$'
          example: "production-key"
        displayName:
          type: string
          description: User-friendly name for the API key
          example: "Production Key"
        expiresAt:
          type: string
          format: date-time
          description: Optional expiration time in ISO 8601 format
          example: "2026-12-31T23:59:59Z"
    CreateLLMProviderAPIKeyResponse:
      type: object
      required:
        - status
        - message
        - keyId
        - apiKey
      properties:
        status:
          type: string
          description: Status of the operation
          example: "success"
        message:
          type: string
          description: Detailed message about the operation result
          example: "API key created and broadcasted to gateways successfully"
        keyId:
          type: string
          description: Unique identifier of the generated key
          example: "production-key"
        apiKey:
          type: string
          description: The generated API key value (shown only once, 64 hexadecimal characters)
          example: "a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456"
  responses:
    Unauthorized:
      description: Unauthorized. Authentication credentials are missing or invalid.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 401
            message: Unauthorized
            description: Authorization header is required or token is invalid

    BadRequest:
      description: Bad Request. Invalid request or validation error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 400
            message: Bad Request
            description: Invalid request or validation error
    NotFound:
      description: Not Found. The specified resource does not exist.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 404
            message: Not Found
            description: The specified resource does not exist
    Conflict:
      description: Conflict. Specified resource already exists.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 409
            message: Conflict
            description: Specified resource already exists
    InternalServerError:
      description: Internal Server Error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 500
            message: Internal Server Error
            description: The server encountered an internal error. Please contact
              administrator.
  parameters:
    organizationId:
      name: organizationId
      in: path
      required: true
      description: |
        **Organization ID** consisting of the **UUID** of the Organization.
      schema:
        type: string
        format: uuid
        example: "123e4567-e89b-12d3-a456-426614174000"

    ProjectID:
      name: projectId
      in: path
      required: true
      description: |
        **Project ID** consisting of the **UUID** of the Project.
      schema:
        type: string
        format: uuid
        example: "yr434567-de34-76uj6-w376-234324532"

    apiID:
      name: apiId
      in: path
      description: |
        **API ID** consisting of the **handle** (unique identifier) of the API.
      required: true
      schema:
        type: string
        example: my-api-handle


    projectId-Q:
      name: projectId
      in: query
      required: false
      description: |
        **Project ID** consisting of the **UUID** of the Project to filter APIs by.
      schema:
        type: string
        format: uuid
        example: "yr434567-de34-76uj6-w376-234324532"

    gatewayId-Q:
      name: gatewayId
      in: query
      required: false
      description: |
        **Gateway ID** consisting of the **UUID** of the Gateway to filter status by.
      schema:
        type: string
        format: uuid
        example: "987e6543-e21b-45d3-a789-426614174999"

    api-identifier-Q:
      name: identifier
      in: query
      required: false
      description: |
        **API Identifier** to check for existence within the organization.
        Either this parameter or both 'name' and 'version' parameters are required.
      schema:
        type: string
        example: "weather-v1"

    api-name-Q:
      name: name
      in: query
      required: false
      description: |
        **API Name** to check for existence within the organization.
        Must be used together with 'version' parameter if 'identifier' is not provided.
      schema:
        type: string
        example: "Weather API"

    api-version-Q:
      name: version
      in: query
      required: false
      description: |
        **API Version** to check for existence within the organization.
        Must be used together with 'name' parameter if 'identifier' is not provided.
      schema:
        type: string
        example: "v1"

    GatewayID:
      name: gatewayId
      in: path
      required: true
      description: |
        **Gateway ID** consisting of the **UUID** of the Gateway.
      schema:
        type: string
        format: uuid
        example: "987e6543-e21b-45d3-a789-426614174999"

    TokenID:
      name: tokenId
      in: path
      required: true
      description: |
        **Token ID** consisting of the **UUID** of the Token.
      schema:
        type: string
        format: uuid
        example: "abc12345-f678-90de-f123-456789abcdef"

    ArtifactType-Q:
      name: artifactType
      in: query
      required: false
      description: Filter artifacts by type
      schema:
        type: string
        enum: ["API", "MCP", "API_PRODUCT"]
      example: "API"

    depth-Q:
      name: depth
      in: query
      required: false
      description: |
        Limits the depth of directory traversal when fetching Git repository content.
        - `0` or omitted: Returns all content (unlimited depth)
        - `1`: Returns only root-level files and directories
        - `2`: Returns content within two levels from the root
        - Maximum allowed depth is 10 for performance reasons
      schema:
        type: integer
        minimum: 0
        maximum: 10
        default: 0
      example: 2

    DevPortalID:
      name: devportalId
      in: path
      required: true
      description: |
        **DevPortal ID** consisting of the **UUID** of the DevPortal.
      schema:
        type: string
        format: uuid
        example: "123e4567-e89b-12d3-a456-426614174000"

    deploymentId:
      name: deploymentId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: The UUID of the deployment

    deploymentStatus-Q:
      name: status
      in: query
      required: false
      schema:
        type: string
        enum:
          - DEPLOYED
          - UNDEPLOYED
          - ARCHIVED
      description: Filter deployments by status (DEPLOYED, UNDEPLOYED, or ARCHIVED)

tags:
  - name: Health
    description: Health check endpoints
  - name: Organizations
    description: Organization management operations
  - name: Projects
    description: Project management operations
  - name: APIs
    description: API management operations
  - name: API Deployments
    description: API deployment artifact management and lifecycle operations
  - name: API Portal
    description: API portal publishing and unpublishing operations
  - name: DevPortals
    description: DevPortal management operations
  - name: Gateways
    description: Gateway registration and management operations
  - name: Gateway Tokens
    description: Gateway token rotation and revocation operations
  - name: LLM Providers
    description: LLM provider management operations
  - name: LLM Proxies
    description: LLM proxy management operations
  - name: LLM Provider Templates
    description: LLM provider template management operations
  - name: LLM Provider Deployments
    description: LLM provider deployment operations
